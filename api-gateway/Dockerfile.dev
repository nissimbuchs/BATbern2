FROM gradle:8.5-jdk21 AS development

# Set working directory to workspace root (where settings.gradle is)
WORKDIR /workspace

# Expose application port
EXPOSE 8080

# Note: In docker-compose, the entire project directory is mounted as a volume
# This allows hot reloading and gives access to shared-kernel dependency
# Gradle runs from root to access settings.gradle and all subprojects

# Run api-gateway subproject with continuous build for hot reload
ENTRYPOINT ["gradle", ":api-gateway:bootRun", "--continuous", "--no-daemon", "--info"]
