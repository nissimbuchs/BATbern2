# Story: Event Registration Flow - Wireframe

**Story**: Epic 2, Story 4
**Screen**: Event Registration Flow
**User Role**: Attendee
**Related FR**: FR6 (Registration)

---

## 3. Event Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back                  Register for Spring Conference 2025                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Registration Progress:  â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹                              â”‚ â”‚
â”‚  â”‚                         Details                Confirm                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€ STEP 1: YOUR DETAILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  Personal Information                                                        â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  First Name *                    Last Name *                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚  â”‚ John                â”‚        â”‚ Smith               â”‚                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  Email Address *                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚  â”‚
â”‚  â”‚  â”‚ john.smith@company.ch                                â”‚                    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚
â”‚  â”‚  âœ“ We'll send your ticket and event updates here                             â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  Company/Organization * (autocomplete)                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        Job Title                                    â”‚  â”‚
â”‚  â”‚  â”‚ TechCorp AG â–¼       â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ Senior Developer    â”‚                      â”‚  â”‚
â”‚  â”‚  ğŸ’¡ Existing companies suggested  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  Industry Sector                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚  â”‚
â”‚  â”‚  â”‚ Financial Services â–¼                                  â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  Years of Experience                                                         â”‚  â”‚
â”‚  â”‚  â—‹ 0-2 years  â—‹ 3-5 years  â— 6-10 years  â—‹ 10+ years                         â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚  How did you hear about us?                                                  â”‚  â”‚
â”‚  â”‚  â˜ Previous attendee  â˜‘ Colleague  â˜ LinkedIn  â˜ Company                     â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚                                                   [Next: Confirm â†’]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[STEP 2: CONFIRMATION]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€ STEP 2: CONFIRM REGISTRATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                                â”‚  â”‚
â”‚  â”‚  Review Your Registration                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Event:     Spring Conference 2025: Cloud Native Architecture             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Date:      May 15, 2025                                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Location:  Kursaal Bern                                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Time:      08:30 - 18:00                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Price:     FREE (including lunch & coffee)                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Attendee:  John Smith                                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Email:     john.smith@company.ch                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Company:   TechCorp AG                                                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                                â”‚  â”‚
â”‚  â”‚  Communication Preferences                                                     â”‚  â”‚
â”‚  â”‚  â˜‘ Send me event reminders (1 week and 1 day before)                           â”‚  â”‚
â”‚  â”‚  â˜‘ Subscribe to BATbern newsletter (monthly)                                   â”‚  â”‚
â”‚  â”‚                                                                                â”‚  â”‚
â”‚  â”‚  Terms & Conditions                                                            â”‚  â”‚
â”‚  â”‚  â˜‘ I agree to the event terms and photo/video policy                           â”‚  â”‚
â”‚  â”‚  â˜‘ I understand this is a free event with limited capacity                     â”‚  â”‚
â”‚  â”‚                                                                                â”‚  â”‚
â”‚  â”‚  [â† Back]                                   [Complete Registration]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”˜
```

---

## API Requirements

### Initial Page Load APIs

When the Event Registration screen loads, the following APIs are called to provide the necessary data:

1. **GET /api/v1/events/{eventId}?include=venue,sessions,speakers**
   - Query params: `include=venue,sessions,speakers` (optional fields to include)
   - Returns: Event details with embedded venue data (title, eventDate, startTime, endTime, admissionFee, maxAttendees, currentAttendees, venue.name, venue.address)
   - Used for: Display event name, date, location, time range, price in confirmation view, track capacity for "Limited capacity" messaging, calculate remaining seats
   - Consolidation: Single endpoint replaces separate event + venue calls (Story 1.17)

2. **GET /api/v1/attendees/me?include=registrations,preferences**
   - Query params: `include=registrations,preferences` (if authenticated)
   - Returns: Attendee profile with registrations and preferences (firstName, lastName, email, company, jobTitle, industrySector, yearsOfExperience, communicationPreferences)
   - Used for: Pre-populate all form fields for returning users
   - Consolidation: Uses consolidated Attendees API (Story 1.25)

3. **GET /api/v1/companies/search?query={query}&limit=20**
   - Query params: `query` (search string), `limit` (max results, default 20)
   - Returns: List of existing companies matching the query (id, name, industry)
   - Used for: Provide smart suggestions for company field autocomplete
   - Caching: Redis-backed with 5-minute TTL for common queries
   - Consolidation: Uses consolidated Companies API with search endpoint (Story 1.22)

4. **GET /api/v1/events/{eventId}/registrations?filter[email]={email}**
   - Query params: `filter[email]` (email from form input)
   - Returns: Registration list filtered by email (empty if not registered, or registration details if exists)
   - Used for: Check for duplicate registration, show "already registered" warning
   - Consolidation: Uses nested registrations endpoint under Events API (Story 1.17)

### User Action APIs

5. **POST /api/v1/events/{eventId}/registrations**
   - Triggered by: User clicks [Complete Registration] button in Step 2
   - Payload: Complete registration data (attendeeDetails, communicationPreferences, termsAccepted, photoVideoConsent)
   - Returns: Registration confirmation (registrationId, confirmationCode, ticketUrl)
   - Used for: Creates registration record, sends confirmation email, redirects to success page
   - Consolidation: Nested under Events API (Story 1.17)

6. **PATCH /api/v1/events/{eventId}/registrations/draft**
   - Triggered by: User navigates between steps (auto-save)
   - Payload: Current form state for completed step (partial registration data)
   - Returns: Draft saved confirmation
   - Used for: Stores partial registration data, allows user to return later
   - Consolidation: Uses PATCH for partial updates (Story 1.17)

7. **PUT /api/v1/attendees/me**
    - Triggered by: User completes registration (creates or updates attendee profile)
    - Payload: Attendee profile data from form (firstName, lastName, email, company, jobTitle, etc.)
    - Returns: Created or updated attendee profile
    - Used for: Creates/updates reusable attendee profile for future registrations
    - Consolidation: Single endpoint for both create and update operations (Story 1.25)

8. **POST /api/v1/notifications/subscriptions**
    - Triggered by: User checks "Subscribe to BATbern newsletter" checkbox (on registration completion)
    - Payload: `{ type: "newsletter", email: string, source: "event_registration", eventId: uuid, preferences: { frequency: "monthly" } }`
    - Returns: Subscription confirmation
    - Used for: Adds email to newsletter distribution list
    - Consolidation: Uses consolidated Notifications API (Story 1.26)

---

## Navigation Map

### Multi-Step Form Navigation

1. **â† Back button (Step 1)** â†’ Navigate to `Previous Page`
   - Returns to referring page (likely Current Event Landing)
   - Context: None (abandons registration)

2. **[Next: Confirm â†’] button (Step 1)** â†’ Navigate to `Step 2 - Confirm Registration`
   - Advances to step 2 (same screen)
   - Validation: Validates required fields (First Name, Last Name, Email, Company)
   - Context: Form data carried forward in state

3. **[â† Back] button (Step 2)** â†’ Navigate to `Step 1 - Your Details`
   - Returns to step 1 (same screen)
   - Context: All form data retained for editing

4. **[Complete Registration] button (Step 2)** â†’ Navigate to `Registration Success Page`
   - Submits registration and navigates to success page
   - Validation: Validates terms acceptance checkboxes are checked
   - Target: `/events/{eventId}/registration/success?confirmationCode=BAT-2025-1234`
   - Context: registrationId, confirmationCode, ticketUrl

### Completion Navigation

5. **Registration Success (auto-navigation)** â†’ Navigate to `Success Confirmation Screen`
   - After successful registration completion
   - Shows ticket download, calendar invite
   - Context: Registration details, ticket URL, calendar invite link

### Error State Navigation

6. **Duplicate Registration Detected** â†’ Shows `Duplicate Registration Modal`
   - Modal with option to view existing registration or use different email
   - No navigation (modal on same screen)
   - Context: Existing registrationId

---
