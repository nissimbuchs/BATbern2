# Story 1.15a.11: Remaining Resources API Consolidation

## Status
Draft

## Story

**As a** developer,
**I want** consolidated APIs for remaining miscellaneous resources,
**so that** all API endpoints follow consistent patterns.

## Domain Context

### Primary Domain
Multiple domains - Miscellaneous resources (Invitations, Files, Planning, Sessions, Presentations, Registrations, Venues, Admin, Archive)

### Involved Services
- Multiple services
- API Gateway (routing, middleware)
- Shared Kernel (query utilities from Story 1.15a)

### Cross-Domain Dependencies
- **Depends on**: Story 1.15a (API Consolidation Foundation)
- **Depends on**: Stories 1.15a.1-1.15a.10 for related resources
- **Consolidates**: Remaining endpoints not covered in Phase 2 & 3

## Requirements Context

### Related Functional Requirements
- Various FRs across miscellaneous features

### Acceptance Criteria Source
API Consolidation Analysis (docs/api-consolidation-analysis.md), Phase 3 - Other Resources

## Architecture Context

### Architecture Patterns
[Source: docs/api-consolidation-analysis.md]
- **Remaining Endpoints**: ~50-100 miscellaneous endpoints
- **Consolidation Target**: ~30-50 endpoints
- **Reduction**: ~40-50%

## Remaining Domains to Consolidate

### 1. Invitations (13 endpoints)
```
GET    /api/v1/invitations?filter={}&page={}
GET    /api/v1/invitations/{id}
POST   /api/v1/invitations
PUT    /api/v1/invitations/{id}/accept
PUT    /api/v1/invitations/{id}/decline
DELETE /api/v1/invitations/{id}
```

### 2. Files (8 endpoints)
```
GET    /api/v1/files?filter={}&page={}
GET    /api/v1/files/{id}
POST   /api/v1/files/upload
DELETE /api/v1/files/{id}
```

### 3. Planning (8 endpoints)
```
GET    /api/v1/planning/timeline?eventId={}
POST   /api/v1/planning/milestones
PUT    /api/v1/planning/milestones/{id}
```

### 4. Sessions (6 endpoints)
```
GET    /api/v1/sessions?filter={}&page={}
GET    /api/v1/sessions/{id}
POST   /api/v1/sessions
PUT    /api/v1/sessions/{id}
DELETE /api/v1/sessions/{id}
```

### 5. Presentations (5 endpoints)
```
GET    /api/v1/presentations?speakerId={}
GET    /api/v1/presentations/{id}
POST   /api/v1/presentations
```

### 6. Registrations (5 endpoints)
```
GET    /api/v1/registrations?eventId={}&page={}
GET    /api/v1/registrations/{id}
PATCH  /api/v1/registrations/{id}
```

### 7. Venues (5 endpoints)
```
GET    /api/v1/venues?filter={}&page={}
GET    /api/v1/venues/{id}
POST   /api/v1/venues
PUT    /api/v1/venues/{id}
```

### 8. Admin (13 endpoints)
```
GET    /api/v1/admin/system/status
GET    /api/v1/admin/system/metrics
GET    /api/v1/admin/users?filter={}&page={}
GET    /api/v1/admin/audit-logs?filter={}&page={}
POST   /api/v1/admin/feature-flags
GET    /api/v1/admin/feature-flags
PUT    /api/v1/admin/feature-flags/{id}
```

### 9. Archive (11 endpoints)
```
GET    /api/v1/archive/events?year={}&page={}
GET    /api/v1/archive/search?query={}
GET    /api/v1/archive/speakers/hall-of-fame
GET    /api/v1/archive/topics/statistics
```

## Acceptance Criteria

1. **All remaining resources**: Follow standard REST patterns
2. **Invitations**: CRUD with accept/decline actions
3. **Files**: Upload/download with metadata management
4. **Planning**: Timeline and milestone management
5. **Sessions**: Standard CRUD (if not nested under events)
6. **Presentations**: Link to speakers and events
7. **Registrations**: Standard CRUD (if not nested under events)
8. **Venues**: CRUD with search capabilities
9. **Admin**: System monitoring and configuration
10. **Archive**: Historical data access with search

## Estimated Consolidation

**Before**: ~63 endpoints (sum of all remaining)
**After**: ~40 endpoints
**Reduction**: ~37%

## Performance Requirements

- Standard CRUD operations: <200ms (P95)
- Search operations: <300ms (P95)
- Archive search: <500ms (P95)

## Definition of Done

- [ ] All 10 ACs implemented
- [ ] ~63 â†’ ~40 endpoints consolidation achieved
- [ ] All APIs follow standard patterns from Story 1.16
- [ ] OpenAPI specs generated
- [ ] Tests >90% coverage

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-10-04 | 1.0 | Remaining resources consolidation (Phase 3) | Winston (Architect) |
