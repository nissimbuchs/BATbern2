# Story 1.25: Attendees API Consolidation

## Status
Draft

## Story

**As an** attendee,
**I want** consolidated Attendee APIs with personal dashboard and library features,
**so that** I can manage my event registrations and saved content in one place.

## Domain Context

### Primary Domain
Attendee Experience Domain - Registration, personal library, recommendations

### Involved Services
- Attendee Experience Service (primary)
- API Gateway (routing, middleware)
- Shared Kernel (query utilities from Story 1.16)
- ElastiCache Redis (recommendation caching)

### Cross-Domain Dependencies
- **Depends on**: Story 1.16 (API Consolidation Foundation)
- **Depends on**: Story 1.17 (Events API) for event data
- **Depends on**: Story 1.20 (Content API) for content library
- **Integrates with**: Recommendation Engine for personalized suggestions

## Requirements Context

### Related Functional Requirements
- **FR21**: Event registration management
- **FR23**: Personal content library
- **FR25**: Personalized recommendations

### Acceptance Criteria Source
API Consolidation Analysis (docs/api-consolidation-analysis.md), Phase 3 - Attendees Domain

## Architecture Context

### Architecture Patterns
[Source: docs/api-consolidation-analysis.md]
- **Before**: 16 endpoints
- **After**: 8 endpoints
- **Reduction**: 50%
- **Personal Dashboard**: Single endpoint with aggregated data
- **Library Management**: Bookmarks and saved content

## Wireframe Context

### Wireframe References
- `story-5.2-personal-dashboard.md` - Attendee dashboard
- `story-5.3-content-library.md` - Personal library

## Acceptance Criteria

1. **Personal Dashboard**: `GET /api/v1/attendees/me/dashboard?include=registrations,library,recommendations`
2. **Profile Management**: GET/PUT `/api/v1/attendees/me`
3. **Event Registrations**: `GET /api/v1/attendees/me/registrations?status=upcoming|past`
4. **Registration CRUD**: POST/DELETE `/api/v1/attendees/me/registrations/{eventId}`
5. **Content Library**: `GET /api/v1/attendees/me/library?filter={}&page={}`
6. **Bookmark Content**: POST/DELETE `/api/v1/attendees/me/library/{contentId}`
7. **Recommendations**: `GET /api/v1/attendees/me/recommendations?type=events|content`
8. **Attendance History**: `GET /api/v1/attendees/me/history?timeframe={}`

## Consolidated Endpoints (8 Total)

```
# Attendee Profile & Dashboard
GET    /api/v1/attendees/me/dashboard?include=registrations,library,recommendations
GET    /api/v1/attendees/me
PUT    /api/v1/attendees/me

# Event Registrations
GET    /api/v1/attendees/me/registrations?status={}
POST   /api/v1/attendees/me/registrations/{eventId}
DELETE /api/v1/attendees/me/registrations/{eventId}

# Content Library
GET    /api/v1/attendees/me/library?filter={}&page={}
POST   /api/v1/attendees/me/library/{contentId}
DELETE /api/v1/attendees/me/library/{contentId}

# Recommendations & History
GET    /api/v1/attendees/me/recommendations?type={}
GET    /api/v1/attendees/me/history?timeframe={}
```

## Performance Requirements

- Dashboard: <400ms (P95)
- Library: <300ms (P95)
- Recommendations: <600ms (P95)

## Definition of Done

- [ ] All 8 ACs implemented
- [ ] 16 â†’ 8 endpoints consolidation verified
- [ ] Personal dashboard with aggregated data
- [ ] Library bookmark management
- [ ] Personalized recommendations
- [ ] Tests >90% coverage

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-10-04 | 1.0 | Attendees API consolidation (Phase 3) | Winston (Architect) |
