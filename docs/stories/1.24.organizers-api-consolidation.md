# Story 1.24: Organizers API Consolidation

## Status
Draft

## Story

**As an** organizer,
**I want** consolidated Organizer APIs with dashboard and notification capabilities,
**so that** I can manage events and team members efficiently.

## Domain Context

### Primary Domain
Event Management Domain - Organizer workflows and dashboards

### Involved Services
- Event Management Service (organizer subdomain)
- API Gateway (routing, middleware)
- Shared Kernel (query utilities from Story 1.16)
- ElastiCache Redis (dashboard caching)

### Cross-Domain Dependencies
- **Depends on**: Story 1.16 (API Consolidation Foundation)
- **Depends on**: Story 1.17 (Events API) for event data
- **Integrates with**: Notification Service for organizer alerts

## Requirements Context

### Related Functional Requirements
- **FR14**: Organizer dashboard with event overview
- **FR16**: Team management and permissions
- **FR13**: Notification management

### Acceptance Criteria Source
API Consolidation Analysis (docs/api-consolidation-analysis.md), Phase 3 - Organizers Domain

## Architecture Context

### Architecture Patterns
[Source: docs/api-consolidation-analysis.md]
- **Before**: 53 endpoints
- **After**: 15 endpoints
- **Reduction**: 72%
- **Dashboard Consolidation**: Single endpoint with flexible metrics
- **Team Management**: Nested under organizer resource

## Wireframe Context

### Wireframe References
- `story-2.1-organizer-dashboard.md` - Main dashboard
- Organizer team management screens

## Acceptance Criteria

1. **Get Organizer Dashboard**: `GET /api/v1/organizers/dashboard?metrics=events,tasks,notifications&timeframe={}`
2. **Organizer Profile**: GET/PUT `/api/v1/organizers/{id}`
3. **Team List**: `GET /api/v1/organizers/{id}/team?filter={}&page={}`
4. **Team Member CRUD**: POST/PUT/DELETE `/api/v1/organizers/{id}/team/{memberId}`
5. **Pending Tasks**: `GET /api/v1/organizers/{id}/tasks?status=pending|completed`
6. **Task Management**: POST/PUT/DELETE `/api/v1/organizers/{id}/tasks/{taskId}`
7. **Notifications**: `GET /api/v1/organizers/{id}/notifications?filter={}&page={}`
8. **Mark Notifications Read**: PUT `/api/v1/organizers/{id}/notifications/read`
9. **Event Assignments**: `GET /api/v1/organizers/{id}/events?role={}`
10. **Calendar View**: `GET /api/v1/organizers/{id}/calendar?startDate={}&endDate={}`
11. **Activity Feed**: `GET /api/v1/organizers/{id}/activity?timeframe={}`
12. **Analytics**: `GET /api/v1/organizers/{id}/analytics?metrics={}`
13. **Permissions**: GET/PUT `/api/v1/organizers/{id}/team/{memberId}/permissions`
14. **Bulk Task Updates**: PATCH `/api/v1/organizers/{id}/tasks`
15. **Export Data**: POST `/api/v1/organizers/{id}/export?format=csv|json`

## Consolidated Endpoints (15 Total)

```
# Organizer Management
GET    /api/v1/organizers/dashboard?metrics={}&timeframe={}
GET    /api/v1/organizers/{id}
PUT    /api/v1/organizers/{id}

# Team Management
GET    /api/v1/organizers/{id}/team?filter={}&page={}
POST   /api/v1/organizers/{id}/team
PUT    /api/v1/organizers/{id}/team/{memberId}
DELETE /api/v1/organizers/{id}/team/{memberId}

GET    /api/v1/organizers/{id}/team/{memberId}/permissions
PUT    /api/v1/organizers/{id}/team/{memberId}/permissions

# Task Management
GET    /api/v1/organizers/{id}/tasks?status={}
POST   /api/v1/organizers/{id}/tasks
PUT    /api/v1/organizers/{id}/tasks/{taskId}
DELETE /api/v1/organizers/{id}/tasks/{taskId}
PATCH  /api/v1/organizers/{id}/tasks

# Notifications & Activity
GET    /api/v1/organizers/{id}/notifications?filter={}&page={}
PUT    /api/v1/organizers/{id}/notifications/read

GET    /api/v1/organizers/{id}/events?role={}
GET    /api/v1/organizers/{id}/calendar?startDate={}&endDate={}
GET    /api/v1/organizers/{id}/activity?timeframe={}
GET    /api/v1/organizers/{id}/analytics?metrics={}

POST   /api/v1/organizers/{id}/export?format={}
```

## Performance Requirements

- Dashboard: <600ms (P95)
- Team list: <200ms (P95)
- Calendar view: <400ms (P95)

## Definition of Done

- [ ] All 15 ACs implemented
- [ ] 53 â†’ 15 endpoints consolidation verified
- [ ] Dashboard with flexible metrics
- [ ] Team permissions management
- [ ] Tests >90% coverage

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-10-04 | 1.0 | Organizers API consolidation (Phase 3) | Winston (Architect) |
