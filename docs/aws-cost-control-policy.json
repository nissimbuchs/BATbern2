{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DenyHighCostServices",
      "Effect": "Deny",
      "Action": [
        "redshift:*",
        "elasticmapreduce:*",
        "sagemaker:*",
        "databrew:*",
        "forecast:*",
        "personalize:*",
        "textract:*",
        "comprehend:*",
        "translate:*",
        "polly:*",
        "lex:*",
        "workspaces:*",
        "appstream:*",
        "gamelift:*",
        "robomaker:*",
        "groundstation:*",
        "braket:*",
        "managedblockchain:*",
        "honeycode:*",
        "batch:RunJob",
        "batch:CreateJobQueue",
        "batch:CreateComputeEnvironment"
      ],
      "Resource": "*"
    },
    {
      "Sid": "DenyExpensiveEC2Instances",
      "Effect": "Deny",
      "Action": [
        "ec2:RunInstances",
        "ec2:StartInstances"
      ],
      "Resource": "arn:aws:ec2:*:*:instance/*",
      "Condition": {
        "ForAnyValue:StringLike": {
          "ec2:InstanceType": [
            "*.large",
            "*.xlarge",
            "*.2xlarge",
            "*.4xlarge",
            "*.8xlarge",
            "*.12xlarge",
            "*.16xlarge",
            "*.24xlarge",
            "p3.*",
            "p4.*",
            "g4.*",
            "g5.*",
            "inf1.*",
            "c5n.*",
            "m5n.*",
            "r5n.*",
            "x1.*",
            "z1d.*",
            "u-*"
          ]
        }
      }
    },
    {
      "Sid": "DenyExpensiveRDSInstances",
      "Effect": "Deny",
      "Action": [
        "rds:CreateDBInstance",
        "rds:ModifyDBInstance"
      ],
      "Resource": "*",
      "Condition": {
        "ForAnyValue:StringLike": {
          "rds:db-instance-class": [
            "*.large",
            "*.xlarge",
            "*.2xlarge",
            "*.4xlarge",
            "*.8xlarge",
            "*.12xlarge",
            "*.16xlarge",
            "*.24xlarge"
          ]
        }
      }
    },
    {
      "Sid": "DenyGPUInstances",
      "Effect": "Deny",
      "Action": [
        "ec2:RunInstances"
      ],
      "Resource": "arn:aws:ec2:*:*:instance/*",
      "Condition": {
        "ForAnyValue:StringLike": {
          "ec2:InstanceType": [
            "p2.*",
            "p3.*",
            "p4.*",
            "g3.*",
            "g4.*",
            "g5.*"
          ]
        }
      }
    },
    {
      "Sid": "DenyReservedInstancePurchases",
      "Effect": "Deny",
      "Action": [
        "ec2:PurchaseReservedInstancesOffering",
        "rds:PurchaseReservedDBInstancesOffering",
        "elasticache:PurchaseReservedCacheNodesOffering",
        "redshift:PurchaseReservedNodeOffering"
      ],
      "Resource": "*"
    },
    {
      "Sid": "LimitS3StorageClasses",
      "Effect": "Deny",
      "Action": [
        "s3:PutObject"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "s3:x-amz-storage-class": [
            "GLACIER",
            "DEEP_ARCHIVE"
          ]
        }
      }
    },
    {
      "Sid": "DenyNATGateway",
      "Effect": "Deny",
      "Action": [
        "ec2:CreateNatGateway"
      ],
      "Resource": "*"
    }
  ]
}