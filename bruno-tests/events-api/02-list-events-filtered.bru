meta {
  name: List Events - Filtered
  type: http
  seq: 2
}

get {
  url: {{baseUrl}}/events?filter={"status":"published"}&sort=-date
  body: none
  auth: bearer
}

auth:bearer {
  token: {{authToken}}
}

params:query {
  filter: {"status":"published"}
  sort: -date
}

assert {
  res.status: eq 200
}

tests {
  test("should return 200 status", function() {
    expect(res.getStatus()).to.equal(200);
  });

  test("should filter events by status", function() {
    const events = res.getBody().data;
    if (events.length > 0) {
      events.forEach(event => {
        expect(event.status).to.equal('published');
      });
    }
  });
}
